<!DOCTYPE html>
<html>
<head>
	<title>Forgotten Password</title>
    <link rel="shortcut icon" href="assets/img/favicon.ico" type="image/x-icon" />
	<!-- CSS -->
	<link rel="stylesheet" href="assets/css/bootstrap.css" type="text/css" />
	<link rel="stylesheet" href="assets/css/passwordManager.css" type="text/css" />
	<!-- JS -->
	<script src="assets/js/bootstrap.js" type="text/javascript"></script>
	<script src="assets/js/jquery.min.js" type="text/javascript"></script>
	<script src="https://use.typekit.net/ayg4pcz.js"></script>
</head>
<body>
<div id="background">
    <div class="container">
    <h1 class="welcome text-center"><i class="glyphicon glyphicon-gift" style="color:#AA2412;"></i> LGPM <i class="glyphicon glyphicon-gift" style="color:#AA2412;"></i></h1>
        <div class="card card-container">
        <h2 class='login_title text-center'><i class="glyphicon glyphicon-leaf" style="color:#12AA45;"></i> Reset Password <i class="glyphicon glyphicon-leaf" style="color:#12AA45;"></i></h2>
            <form class="form-signin" autocomplete="off">
                <span id="reauth-email" class="reauth-email"></span>
                <h4 class="input_title"><i class="glyphicon glyphicon-envelope" style="color:#E37506;"></i> Email Address <i id="wrong1" class="glyphicon glyphicon-remove" title="This is not a valid email address."></i><i id="correct1" class="glyphicon glyphicon-ok" title="This is a valid email address."></i></h4>
                <input type="text" id="inputEmail1" class="login_box" placeholder="Email Address" onkeydown="inputOne()" onclick="inputOne1()" autocomplete="off" required autofocus />

                <h4 class="input_title"><i class="glyphicon glyphicon-envelope" style="color:#E37506;"></i> Confirm Email Address <i id="wrong2" class="glyphicon glyphicon-remove" title="This is not a valid email address."></i><i id="correct2" class="glyphicon glyphicon-ok" title="You're good to go!"></i></h4>
                <input type="text" id="inputEmail2" class="login_box" placeholder="Confirm Email Address" onkeydown="inputTwo()" onclick="inputTwo1()" autocomplete="off" required />
                <button id="formReset" class="btn btn-lg btn-danger" type="submit" onclick="formReset()"><i class="glyphicon glyphicon-refresh"></i> Restart</button>
                <button id="userReset" class="btn btn-lg btn-success" type="submit" onclick="userReset()"><i class="glyphicon glyphicon-thumbs-up"></i> Send</button>
                <div id="returnLogin" class="checkbox">
                    <a href="login.html"><label><i class="glyphicon glyphicon-chevron-left"></i> Back to Login</label></a>
                </div>
            </form><!-- /form -->
        </div><!-- /card-container -->
    </div><!-- /container -->
</div><!-- #background -->
</body>
<script type="text/javascript">
// pick a random image from the array for each time the page is loaded (jquery).
$(function() {
    // create array with file names.
    var images = ['abstractBg1.jpg', 'abstractBg2.jpg', 'abstractBg3.jpg', 'abstractBg4.jpg', 'abstractBg5.jpg'];
    // take a random file name from the array, and set it as the #background{background-image}.
    $('#background').css({'background-image': 'url(assets/img/' + images[Math.floor(Math.random() * images.length)] + ')' });
});

// VALIDATION of a real email, on keypress of each text input.
function inputOne() {
    // variables for email text inputs. SCOPING PROBLEMATIC.
    var inputOne = document.getElementById('inputEmail1').value;
    var inputTwo = document.getElementById('inputEmail2').value;
    // if email input #1 does not include '@', '.' OR is not longer than 6 characters - display Bootstrap X.
    if (inputOne.indexOf('@') < 0 || inputOne.indexOf('.') < 0 || inputOne.length < 6) {
        document.getElementById('wrong1').style.display = 'inline';
        document.getElementById('correct1').style.display = 'none';
        document.getElementById('userReset').disabled = true;
    }
    // if email input #1 does include '@', '.' AND is longer than 6 characters - display Bootstrap tick.
    if (inputOne.indexOf('@') > 0 && inputOne.indexOf('.') > 0 && inputOne.length > 6) {
        document.getElementById('correct1').style.display = 'inline';
        document.getElementById('wrong1').style.display = 'none';
        document.getElementById('userReset').disabled = false;
    }
    // load inputOne() every 10ms.
    setTimeout(inputOne, 10);
}
function inputOne1() {
    inputOne();
}

function inputTwo() {
    // variables for email text inputs. SCOPING PROBLEMATIC.
    var inputOne = document.getElementById('inputEmail2').value;
    var inputTwo = document.getElementById('inputEmail2').value;
    // if email input #2 does not include '@', '.' OR is not longer than 6 characters - display Bootstrap X.
    if (inputTwo.indexOf('@') < 0 || inputTwo.indexOf('.') < 0 || inputTwo.length < 6) {
        document.getElementById('wrong2').style.display = 'inline';
        document.getElementById('correct2').style.display = 'none';
        document.getElementById('userReset').disabled = true;
    }
    // if email input #2 does include '@', '.' AND is longer than 6 characters - display Bootstrap tick.
    if (inputTwo.indexOf('@') > 0 && inputTwo.indexOf('.') > 0 && inputTwo.length > 6) {
        document.getElementById('correct2').style.display = 'inline';
        document.getElementById('wrong2').style.display = 'none';
        document.getElementById('userReset').disabled = false;
    }
    // load inputTwo() every 10ms.
    setTimeout(inputTwo, 10);
}
function inputTwo1() {
    inputTwo();
}

// jquery - make sure email inputs match.
$('#userReset').click(function matchDetails() {
    // if email inputs match {}.
    if ($('#inputEmail1').val() == $('#inputEmail2').val()) {
        alert('match!');
    } else // if email inputs do not match {}.
        alert('no match!');
        location.reload();
});
// jquery - disabled 'continue' button if either one of the inputs are empty.
$(document).ready(function () {
    // if either email inputs are empty, disable 'continue' button.
    if ($('#inputEmail1').val() == '' || $('#inputEmail2').val() == '') {
        $('#userReset').attr('disabled', true);
    }
});

function formReset() {
    document.getElementById('inputEmail1').value = "";
    document.getElementById('inputEmail2').value = "";
    location.reload();
}
</script>
</html>